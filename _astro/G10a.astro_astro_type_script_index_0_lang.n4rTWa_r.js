import{B as g}from"./BarChart.KOKhGWM3.js";import{g as h}from"./colors.DR0mxEkc.js";import{s as p,f as d}from"./BaseChart.BPIYNeR_.js";class y extends g{setupControls(){this.setupRegionSelect()}setupRegionSelect(){const e=[...new Set(this.rawData.map(r=>r.region).filter(r=>!!r))].sort();this.regionSelect=this.container.querySelector("#region-select"),this.regionSelect&&(e.forEach(r=>{const a=document.createElement("option");a.value=r,a.textContent=r,this.regionSelect.appendChild(a)}),this.regionSelect.value=this.t("América del Sur"),this.regionSelect.addEventListener("change",this.updateChart.bind(this)))}getRegionalAggregateData(){return this.rawData.filter(e=>e.region===null).sort((e,r)=>e.country.localeCompare(r.compare))}updateChart(){const e=this.regionSelect.value;e&&(this.chart.data=this.getDataByRegion(e),this.chart.update())}getDataByRegion(e){const r=this.rawData.filter(t=>t.region===e).sort((t,n)=>t.country!==n.country?t.country.localeCompare(n.country):parseInt(t.year,10)-parseInt(n.year,10)),a=[...new Set(r.map(t=>t.country))].sort(),l=this.getRegionalAggregateData();r.push(...l),a.push(...new Set(l.map(t=>t.country)));const o={};for(const t of r)t.country!==null&&(o[t.country]===void 0&&(o[t.country]=[]),o[t.country].push(t));return Object.values(o).forEach(t=>t.sort((n,s)=>parseInt(n.year,10)-parseInt(s.year,10))),{labels:Object.keys(o),datasets:[0,1,2].map(t=>({data:Object.entries(o).map(([n,s])=>{const i=s[t];return i?{x:i.country,y:i.homicideVictims,year:i.year}:{x:n,y:null,year:null}}),backgroundColor:h(t)}))}}getData(){return this.getDataByRegion(this.t("América del Sur"))}getOptions(){return this.mergeOptions(super.getOptions(),{scales:{y:{title:{display:!0,text:p(this.t("Víctimas de homicidios cada 100 mil habitantes"),28)}}},plugins:{htmlLegend:{display:!1},legend:{display:!1},tooltip:{callbacks:{title:e=>e[0].label,label:function(e){const r=e.dataset.data[e.dataIndex]?.year,a=d(e.parsed.y,e.chart.parentChart.getFormatOptions());return`${e.chart.parentChart.t("Año")} ${r}: ${a}`}}}}})}}function c(){try{new y("C1-G10a")}catch{}}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",c):c();
