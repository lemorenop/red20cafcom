import{c as x,o as C,f as O,s as T,a as $}from"./floating-ui.dom.C40Xt5xU.js";function M(p){const t=document.createElement("div");return t.innerHTML=p,t.querySelector('a[href^="#cite-ref-"]')?.remove(),t.innerHTML.trim()}document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll('a[id^="cite-ref-"]').forEach(t=>{const[n,s]=t.getAttribute("href")?.split("#");if(!s)return;const u=s,f=u?document.getElementById(u):null;if(!f)return;const E=M(f.innerHTML),e=document.createElement("div");e.className="citation-popover";const r=document.createElement("div");r.className="citation-arrow-border";const c=document.createElement("div");c.className="citation-arrow";const l=document.createElement("div");l.className="citation-content",l.innerHTML=E,e.appendChild(r),e.appendChild(c),e.appendChild(l),document.body.appendChild(e);async function v(){if(!e.classList.contains("show"))return;const{x:o,y:b,placement:g,middlewareData:y}=await x(t,e,{placement:"top",middleware:[C(8),O(),T({padding:8}),$({element:r})]});Object.assign(e.style,{left:`${o}px`,top:`${b}px`});const{x:i,y:a}=y.arrow,w={top:"bottom",right:"left",bottom:"top",left:"right"}[g?.split("-")[0]];Object.assign(r.style,{left:i!=null?`${i}px`:"",top:a!=null?`${a}px`:"",right:"",bottom:"",[w]:"-4px"}),Object.assign(c.style,{left:i!=null?`${i}px`:"",top:a!=null?`${a}px`:"",right:"",bottom:"",[w]:"-3px"})}let d=!1,m=!1;const h=()=>{document.querySelectorAll(".citation-popover.show").forEach(o=>{o!==e&&o.classList.remove("show")}),e.classList.add("show"),v()},L=()=>{setTimeout(()=>{!d&&!m&&e.classList.remove("show")},100)};t.addEventListener("mouseenter",()=>{d=!0,h()}),t.addEventListener("mouseleave",()=>{d=!1,L()}),e.addEventListener("mouseenter",()=>{m=!0}),e.addEventListener("mouseleave",()=>{m=!1,L()}),t.addEventListener("focus",h),t.addEventListener("blur",()=>{setTimeout(()=>{e.contains(document.activeElement)||e.classList.remove("show")},0)}),["scroll","resize"].forEach(o=>{window.addEventListener(o,v,{passive:!0})})}),document.addEventListener("click",t=>{const n=t.target;!n.closest(".citation-popover")&&!n.closest('a[id^="cite-ref-"]')&&document.querySelectorAll(".citation-popover.show").forEach(s=>s.classList.remove("show"))})});
