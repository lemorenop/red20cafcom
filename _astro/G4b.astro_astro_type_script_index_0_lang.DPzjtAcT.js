import{B as c}from"./BarChart.KOKhGWM3.js";import{F as d,f as o}from"./BaseChart.BPIYNeR_.js";class h extends c{DEFAULT_SECTOR="total";setupControls(){this.setupSectorSelect()}setupSectorSelect(){const e={total:this.t("Total de emisiones"),buildings:this.t("Total de emisiones de edificaciones"),energy:this.t("Total de emisiones de sistemas de energÃ­a"),industry:this.t("Total de emisiones de la industria"),transport:this.t("Total de emisiones del transporte"),agriculture:this.t("Total de emisiones del agro"),utcuts:this.t("Total de emisiones UTCUTS")};this.sectorSelect=this.container.querySelector("#sector-select"),this.sectorSelect&&(Object.entries(e).forEach(([a,i])=>{const t=document.createElement("option");t.value=a,t.textContent=i,this.sectorSelect.appendChild(t)}),this.sectorSelect.value=this.DEFAULT_SECTOR,this.sectorSelect.addEventListener("change",()=>this.updateChart()))}updateChart(){const e=this.sectorSelect.value;e&&(this.chart.data=this.getDataBySector(e),this.chart.update())}getDataBySector(e){this.rawData=[...this.rawData].sort((t,s)=>{const r=parseFloat(t[e])/parseFloat(t.pbi);return parseFloat(s[e])/parseFloat(s.pbi)-r});const a=["#526003","#5d6c06","#68790a","#73850e","#7d910f","#889d11","#92a813","#9cb313","#a5bf12","#afca11"];return{labels:this.rawData.map(t=>t.region),datasets:[{label:this.t("Total de emisiones"),data:this.rawData.map(t=>parseFloat(t[e])/parseFloat(t.pbi)),widths:this.rawData.map(t=>parseFloat(t.pbiShare)),backgroundColor:this.rawData.map((t,s)=>new d(a[s]).alpha(.95).rgbString())}]}}getData(){return this.rawData.forEach(e=>{e.pbi=e.pbi/1e4}),this.getDataBySector(this.DEFAULT_SECTOR)}getOptions(){return this.mergeOptions(super.getOptions(),{barPercentage:1,categoryPercentage:1,layout:{padding:{bottom:180,left:60}},scales:{x:{display:!1},y:{beginAtZero:!0,title:{display:!0,text:this.t("Toneladas por cada 10.000 USD de PIB"),font:{size:11}}}},plugins:{variableWidthBar:{},htmlLegend:{display:!1},legend:{display:!1},tooltip:{callbacks:{label:e=>{const a=this.rawData[e.dataIndex],i=parseFloat(a[this.sectorSelect.value]),t=parseFloat(a.pbi),s=i/t;return[`${this.sectorSelect.selectedOptions[0].text}: ${o(i,this.getFormatOptions())} Mt`,`${this.t("PIB real")}: ${o(t,this.getFormatOptions())} ${this.t("millones de USD")}`,`${this.t("Toneladas por cada 10.000 USD de PIB")}: ${o(s,{locale:this.lang,decimalPlaces:6})}`]}}}}})}}function l(){try{new h("C1-G4b")}catch{}}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",l):l();
