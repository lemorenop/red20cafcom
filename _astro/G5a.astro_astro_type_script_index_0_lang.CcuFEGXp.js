import{B as u}from"./BaseChart.BPIYNeR_.js";import{g as n}from"./colors.DR0mxEkc.js";class h extends u{setupControls(){this.setupCountrySelect(),this.setupResetButton()}setupCountrySelect(){const e=[...new Set(this.rawData.map(t=>t.region))].filter(t=>t!==null).sort(),a=Object.fromEntries(e.map(t=>[t,[]]));this.rawData.forEach(t=>{t.region&&t.country!==null&&a[t.region].push(t.country)}),Object.entries(a).forEach(([t,r])=>{r.length===0&&delete a[t]}),this.countrySelect=this.container.querySelector("#country-select"),this.countrySelect&&(Object.entries(a).forEach(([t,r])=>{const o=document.createElement("optgroup");o.label=t,r.forEach(s=>{const i=document.createElement("option");i.value=s,i.textContent=s,o.appendChild(i)}),this.countrySelect.appendChild(o)}),this.countrySelect.addEventListener("change",this.updateChart.bind(this)))}setupResetButton(){this.resetButton=this.container.querySelector("#reset-button"),this.resetButton&&this.resetButton.addEventListener("click",()=>{this.countrySelect.value="",this.chart.data=this.getData(),this.chart.update()})}updateChart(){const e=this.countrySelect.value;if(e){const a=this.rawData.find(t=>t.country===e);if(a){const t=this.getAveragesData().find(r=>r.region===a.region);t&&(this.chart.data.datasets.splice(0,1/0),this.chart.data.datasets.push({label:a.country,data:Object.keys(this.getLabelMapping()).map(r=>a[r]),backgroundColor:n(1,"rgb",.1),pointBackgroundColor:n(1),borderColor:n(1),borderWidth:2}),this.chart.data.datasets.push({label:t.region,data:Object.keys(this.getLabelMapping()).map(r=>t[r]),backgroundColor:n(0,"rgb",.1),pointBackgroundColor:n(0),borderColor:n(0),borderWidth:2}),this.chart.update())}}}getType(){return"radar"}getAveragesData(){return this.rawData.filter(e=>e.country===null)}getLabelMapping(){return{airQuality:this.t("Calidad del aire"),wasteManagement:this.t("GestiÃ³n de residuos"),heavyMetals:this.t("Metales pesados"),sanitationAndDrinkingWater:this.t("Saneamiento y agua potable")}}getData(){const e=[];return this.getAveragesData().forEach((a,t)=>{e.push({label:a.region,data:Object.keys(this.getLabelMapping()).map(r=>a[r]),backgroundColor:n(t,"rgb",.1),pointBackgroundColor:n(t),borderColor:n(t),borderWidth:2})}),{labels:Object.values(this.getLabelMapping()),datasets:e}}getOptions(){return this.mergeOptions(super.getOptions(),{aspectRatio:2,scales:{r:{beginAtZero:!0,max:100,min:0}},plugins:{htmlLegend:{display:!1},legend:{display:!0,position:"bottom",labels:{usePointStyle:!0,pointStyle:"circle",boxWidth:5,boxHeight:5},onClick:e=>{e.native.preventDefault()}},tooltip:{labelAxis:"r"}}})}handleMediaQuery(e){}}function l(){try{new h("C4-G5a")}catch{}}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",l):l();
