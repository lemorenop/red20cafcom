import{c as g,o as y,f as x,s as C,a as O}from"./floating-ui.dom.C40Xt5xU.js";function T(p){const t=document.createElement("div");return t.innerHTML=p,t.querySelector('a[href^="#note-ref-"]')?.remove(),t.innerHTML.trim()}document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll("a[data-note]").forEach(t=>{const o=t.getAttribute("href")?.substring(1),s=o?document.getElementById(o):null;if(!s)return;const L=T(s.innerHTML),e=document.createElement("div");e.className="footnote-popover";const r=document.createElement("div");r.className="footnote-arrow-border";const i=document.createElement("div");i.className="footnote-arrow";const l=document.createElement("div");l.className="footnote-content",l.innerHTML=L,e.appendChild(r),e.appendChild(i),e.appendChild(l),document.body.appendChild(e);async function u(){if(!e.classList.contains("show"))return;const{x:n,y:w,placement:E,middlewareData:b}=await g(t,e,{placement:"top",middleware:[y(8),x(),C({padding:8}),O({element:r})]});Object.assign(e.style,{left:`${n}px`,top:`${w}px`});const{x:a,y:c}=b.arrow,h={top:"bottom",right:"left",bottom:"top",left:"right"}[E?.split("-")[0]];Object.assign(r.style,{left:a!=null?`${a}px`:"",top:c!=null?`${c}px`:"",right:"",bottom:"",[h]:"-4px"}),Object.assign(i.style,{left:a!=null?`${a}px`:"",top:c!=null?`${c}px`:"",right:"",bottom:"",[h]:"-3px"})}let d=!1,m=!1;const f=()=>{document.querySelectorAll(".footnote-popover.show").forEach(n=>{n!==e&&n.classList.remove("show")}),e.classList.add("show"),u()},v=()=>{setTimeout(()=>{!d&&!m&&e.classList.remove("show")},100)};t.addEventListener("mouseenter",()=>{d=!0,f()}),t.addEventListener("mouseleave",()=>{d=!1,v()}),e.addEventListener("mouseenter",()=>{m=!0}),e.addEventListener("mouseleave",()=>{m=!1,v()}),t.addEventListener("focus",f),t.addEventListener("blur",()=>{setTimeout(()=>{e.contains(document.activeElement)||e.classList.remove("show")},0)}),["scroll","resize"].forEach(n=>{window.addEventListener(n,u,{passive:!0})})}),document.addEventListener("click",t=>{const o=t.target;!o.closest(".footnote-popover")&&!o.closest("a[data-note]")&&document.querySelectorAll(".footnote-popover.show").forEach(s=>s.classList.remove("show"))})});
