import{B,f as y,w}from"./BaseChart.BPIYNeR_.js";import{M as k,a as D}from"./chartjs-chart-matrix.esm.Do3SLBbg.js";class x extends B{KEY_LABELS={grossDebt:"Deuda bruta",revenue:"Ingresos",primaryBalance:"Balance primario",consolidatedBalance:"Balance consolidado",consolidatedBalance10Years:"Balance consolidado (10 años)",relativeToRevenue:"Servicios de deuda",implicitRate:"Tasa implícita"};async initialize(){super.initialize(),this.register(k,D)}getType(){return"matrix"}getData(){const i={grossDebt:this.t("Deuda bruta"),revenue:this.t("Ingresos"),primaryBalance:this.t("Balance primario"),consolidatedBalance:this.t("Balance consolidado"),consolidatedBalance10Years:this.t("Balance consolidado (10 años)"),relativeToRevenue:this.t("Servicios de deuda"),implicitRate:this.t("Tasa implícita")},u=this.rawData.length;Object.keys(this.rawData[0]).length-1;const s=[];this.rawData.forEach(t=>{[1,2,3,4,5,6,7].forEach(a=>{const[e,l]=Object.entries(t)[a];s.push({x:i[e],y:t.country,v:l,k:e})})});const b={};Object.keys(i).forEach(t=>{const a=this.rawData.map(e=>parseFloat(e[t]));b[t]=[Math.min(...a),Math.max(...a)]});function f(t,a,e,l){if(a===e)return"rgb(255, 255, 255)";let c,d,p;if(l==="two-color"){let g=(t-a)/(e-a);const r={r:255,g:255,b:255},o={r:248,g:107,b:109};c=Math.round(r.r+g*(o.r-r.r)),d=Math.round(r.g+g*(o.g-r.g)),p=Math.round(r.b+g*(o.b-r.b))}else if(l==="three-color"){const g=Math.max(Math.abs(a),Math.abs(e));let r=t/g;const o={r:248,g:107,b:109},n={r:255,g:255,b:255},m={r:99,g:190,b:123};if(r<0){let h=r+1;c=Math.round(o.r+h*(n.r-o.r)),d=Math.round(o.g+h*(n.g-o.g)),p=Math.round(o.b+h*(n.b-o.b))}else{let h=r;c=Math.round(n.r+h*(m.r-n.r)),d=Math.round(n.g+h*(m.g-n.g)),p=Math.round(n.b+h*(m.b-n.b))}}else throw new Error("Invalid scale type. Use 'two-color' or 'three-color'.");return`rgb(${c}, ${d}, ${p})`}return{datasets:[{label:this.t("Tablero fiscal"),data:s,backgroundColor(t){const a=t.dataset.data[t.dataIndex],e=parseFloat(a.v),[l,c]=b[a.k],d=a.k.includes("Balance")?"three-color":"two-color";return f(e,l,c,d)},hoverBackgroundColor(t){const a=t.dataset.data[t.dataIndex],e=parseFloat(a.v),[l,c]=b[a.k],d=a.k.includes("Balance")?"three-color":"two-color";return f(e,l,c,d)},width:({chart:t})=>t.chartArea?t.chartArea.width/7-1:10,height:({chart:t})=>t.chartArea?t.chartArea.height/u-1:10}]}}getOptions(){return this.mergeOptions(super.getOptions(),{maintainAspectRatio:!0,aspectRatio:"1",scales:{x:{ticks:{display:!0,autoSkip:!1,maxRotation:90,minRotation:90,labelOffset:14},grid:{display:!0},type:"category",position:"top",offset:!0},y:{offset:!0,ticks:{stepSize:1,autoSkip:!1},grid:{display:!0},type:"category",labels:this.rawData.map(i=>i.country).reverse()}},plugins:{htmlLegend:{display:!1},legend:{display:!1},tooltip:{callbacks:{title(){return""},label:this.getTooltipLabelFormatter()}},datalabels:{color:"#374151",font:{weight:"normal",size:11},formatter:this.getDatalabelsFormatter()}}})}getTooltipLabelFormatter(){const i=this.getFormatOptions();return u=>{const s=u.dataset.data[u.dataIndex];return[s.y,s.x,y(s.v,i)]}}getDatalabelsFormatter(){const i=this.getFormatOptions();return(u,s)=>y(s.dataset.data[s.dataIndex].v,i)}getPlugins(){return[...super.getPlugins(),w]}}function M(){try{new x("C1-G13a")}catch{}}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",M):M();
