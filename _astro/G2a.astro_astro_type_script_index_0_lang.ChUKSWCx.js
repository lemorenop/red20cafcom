import{B as y}from"./BarChart.KOKhGWM3.js";import{g as u}from"./colors.DR0mxEkc.js";import"./BaseChart.BPIYNeR_.js";class C extends y{defaultYear="1850";async initialize(){await super.initialize(),this.setupYearSelect(),this.setupImage(),this.setupTitle(),this.setupDynamicTable()}setupYearSelect(){const t=[...new Set(this.rawData.map(a=>a.year))].sort();this.yearSelect=this.container.querySelector("#yearSelect"),this.yearSelect&&(t.forEach(a=>{const e=document.createElement("option");e.value=a,e.textContent=a,this.yearSelect.appendChild(e)}),this.yearSelect.value=this.defaultYear,this.yearSelect.addEventListener("change",this.updateChart.bind(this)))}setupTitle(){this.title=this.container.querySelector("#chartTitle"),this.title.textContent=this.getTitle(this.defaultYear)}setupImage(){this.image=document.querySelector("#chartImage")}setupDynamicTable(){if(this.tableContainer=document.querySelector("#chartTableContainer"),this.tableContainer){const t=document.createElement("table");t.className="w-full md:table-fixed border-collapse bg-white shadow-sm rounded-sm overflow-hidden";const a=document.createElement("caption");a.className="caption-top text-left text-base font-semibold text-gray-700 mb-4",a.textContent=this.getTableTitle(this.defaultYear),t.appendChild(a);const e=[...new Set(this.rawData.map(o=>o.region))],n=document.createElement("thead"),s=document.createElement("tr");s.className="bg-gray-50";const l=document.createElement("th");l.className="px-6 py-3 text-right !text-sm font-semibold text-gray-700 tracking-wider border-b",l.textContent=this.t("CategorÃ­a"),s.appendChild(l),e.forEach(o=>{const i=document.createElement("th");i.className="px-6 py-3 text-right !text-sm font-semibold text-gray-700 tracking-wider border-b",i.textContent=o,s.appendChild(i)}),n.appendChild(s),t.appendChild(n);const r=document.createElement("tbody");t.appendChild(r),this.tableContainer.appendChild(t),this.updateTable(this.defaultYear)}}getTitle(t){return this.t("Coberturas naturales y seminaturales en {year}",{year:t})}getTableTitle(t){return this.t("Tabla de uso de suelos en {year}",{year:t})}updateTable(t){if(!this.tableContainer)return;this.title&&(this.title.textContent=this.getTitle(t));const a=this.tableContainer.querySelector("caption");a.textContent=this.getTableTitle(t);const e=this.tableContainer.querySelector("tbody");e.innerHTML="";const n=this.rawData.filter(r=>r.year===t),s=[...new Set(this.rawData.map(r=>r.region))];[{key:"settlements",label:this.t("Asentamientos")},{key:"crops",label:this.t("Cultivos")},{key:"grazing",label:this.t("Pastoreo")},{key:"seminatural",label:this.t("Seminatural")},{key:"natural",label:this.t("Natural")}].forEach(({key:r,label:o})=>{const i=document.createElement("tr");i.className="hover:bg-gray-50 transition-colors duration-150";const c=document.createElement("td");c.className="px-6 py-4 text-sm text-gray-900 border-b font-medium",c.textContent=o,i.appendChild(c),s.forEach(g=>{const h=n.find(b=>b.region===g),d=document.createElement("td");d.className="px-6 py-4 text-sm text-gray-900 border-b text-right",d.textContent=h?`${this.valueAsPercentage(h[r])}`:"N/A",i.appendChild(d)}),e.appendChild(i)})}updateImage(t){this.image&&(this.image.src=`/images/superficie-natural-o-seminatural-${t}.webp`)}updateChart(){const t=this.yearSelect.value;t&&(this.chart.data=this.getDataByYear(t),this.chart.update(),this.updateTable(t),this.updateImage(t))}getDataByYear(t){const a=this.rawData.filter(e=>e.year===t).sort((e,n)=>e.region.localeCompare(n.region));return{labels:a.map(e=>e.region),datasets:[{label:this.t("Superficie seminatural"),data:a.map(e=>e.seminatural),backgroundColor:u(0),borderColor:u(0)},{label:this.t("Superficie natural"),data:a.map(e=>e.natural),backgroundColor:"#1C9750",borderColor:"#1C9750"}]}}getData(){return this.getDataByYear(this.defaultYear)}getOptions(){return this.mergeOptions(super.getOptions(),{responsive:!0,maintainAspectRatio:!0,aspectRatio:"1",scales:{y:{max:100,min:0,ticks:{callback:this.ticksAsPercentage()}}},plugins:{dynamicHeight:{enabled:!1},tooltip:{mode:"index",labelAsPercentage:!0}}})}}function m(){try{new C("C4-G2a")}catch{}}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",m):m();
