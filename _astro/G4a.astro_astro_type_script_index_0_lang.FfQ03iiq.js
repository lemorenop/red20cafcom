import{B as c}from"./BarChart.KOKhGWM3.js";import{F as p,f as i}from"./BaseChart.BPIYNeR_.js";class d extends c{DEFAULT_SECTOR="total";setupControls(){this.setupSectorSelect()}setupSectorSelect(){const a={total:this.t("Total de emisiones"),buildings:this.t("Total de emisiones de edificaciones"),energy:this.t("Total de emisiones de sistemas de energía"),industry:this.t("Total de emisiones de la industria"),transport:this.t("Total de emisiones del transporte"),agriculture:this.t("Total de emisiones del agro"),utcuts:this.t("Total de emisiones UTCUTS")};this.sectorSelect=this.container.querySelector("#sector-select"),this.sectorSelect&&(Object.entries(a).forEach(([s,t])=>{const e=document.createElement("option");e.value=s,e.textContent=t,this.sectorSelect.appendChild(e)}),this.sectorSelect.value=this.DEFAULT_SECTOR,this.sectorSelect.addEventListener("change",()=>this.updateChart()))}updateChart(){const a=this.sectorSelect.value;a&&(this.chart.data=this.getDataBySector(a),this.chart.update())}getDataBySector(a){this.rawData=[...this.rawData].sort((t,e)=>{const o=parseFloat(t[a])/parseFloat(t.population);return parseFloat(e[a])/parseFloat(e.population)-o});const s=["#526003","#5d6c06","#68790a","#73850e","#7d910f","#889d11","#92a813","#9cb313","#a5bf12","#afca11"];return{labels:this.rawData.map(t=>t.region),datasets:[{label:this.t("Total de emisiones"),data:this.rawData.map(t=>parseFloat(t[a])/parseFloat(t.population)),widths:this.rawData.map(t=>parseFloat(t.populationShare)),backgroundColor:this.rawData.map((t,e)=>new p(s[e]).alpha(.95).rgbString())}]}}getData(){return this.getDataBySector(this.DEFAULT_SECTOR)}getOptions(){return this.mergeOptions(super.getOptions(),{barPercentage:1,categoryPercentage:1,layout:{padding:{bottom:180,left:60}},scales:{x:{display:!1},y:{beginAtZero:!0,title:{display:!0,text:this.t("Toneladas por persona")}}},plugins:{variableWidthBar:{},htmlLegend:{display:!1},legend:{display:!1},tooltip:{callbacks:{label:a=>{const s=this.rawData[a.dataIndex],t=parseFloat(s[this.sectorSelect.value]),e=parseFloat(s.population),o=t/e;return[`${this.sectorSelect.selectedOptions[0].text}: ${i(t,this.getFormatOptions())} Mt`,`${this.t("Población")}: ${i(e,this.getFormatOptions())} ${this.t("Millones").toLocaleLowerCase()}`,`${this.t("Toneladas por persona")}: ${i(o,this.getFormatOptions())}`]}}}}})}}function r(){try{new d("C1-G4a")}catch{}}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",r):r();
