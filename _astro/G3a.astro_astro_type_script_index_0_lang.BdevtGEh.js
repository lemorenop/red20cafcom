import{L as h}from"./LineChart.d0G-umA_.js";import{g as c}from"./colors.DR0mxEkc.js";import"./BaseChart.BPIYNeR_.js";class y extends h{zoneLabels={};setupControls(){this.setupCountrySelect(),this.setupZoneSelect()}setupZoneSelect(){this.zoneLabels={national:this.t("Nacional"),urban:this.t("Urbana"),rural:this.t("Rural")},this.zoneSelect=this.container.querySelector("#zone-select"),this.zoneSelect&&(Object.entries(this.zoneLabels).forEach(([a,e])=>{const t=document.createElement("option");t.value=a,t.textContent=e,this.zoneSelect.appendChild(t)}),this.zoneSelect.addEventListener("change",()=>{this.update()}))}updateZoneSelectByCountry(a){if(this.zoneSelect){const e=this.zoneSelect.value,t=[],r=this.rawData.filter(n=>n.country===a);for(["national","urban","rural"].forEach(n=>{const s=n[0].toUpperCase()+n.slice(1).toLowerCase();r.some(i=>i[`povertyRate${s}`]!==null||i[`extremePovertyRate${s}`]!==null)&&t.push(n)});this.zoneSelect.options.length;)this.zoneSelect.options.remove(0);t.forEach(n=>{const s=document.createElement("option");s.value=n,s.textContent=this.zoneLabels[n],this.zoneSelect.appendChild(s)}),t.includes(e)&&(this.zoneSelect.value=e)}}setupCountrySelect(){const a=[...new Set(this.rawData.map(e=>e.country))].sort();this.countrySelect=document.getElementById("country-select"),this.countrySelect&&(a.forEach(e=>{const t=document.createElement("option");t.value=e,t.textContent=e,this.countrySelect.appendChild(t)}),a.length>0&&(this.countrySelect.value=a[0]),this.countrySelect.addEventListener("change",()=>{this.update()}))}update(){const a=this.countrySelect.value;this.updateZoneSelectByCountry(a);const e=this.zoneSelect.value,t=this.rawData.filter(o=>o.country===a).sort((o,i)=>o.year-i.year),r=`${e.substring(0,1).toUpperCase()}${e.substring(1).toLowerCase()}`,n=`povertyRate${r}`,s=`extremePovertyRate${r}`;this.chart.data.datasets[0].data=t.map(o=>({x:o.year,y:o[n]})),this.chart.data.datasets[1].data=t.map(o=>({x:o.year,y:o[s]})),this.chart.update()}getData(){const a=this.t("AmÃ©rica Latina"),e=this.rawData.filter(t=>t.country===a).sort((t,r)=>t.year-r.year);return{datasets:[{label:this.t("Tasa de pobreza"),data:e.map(t=>({x:t.year,y:t.povertyRateNational})),...this.getDatasetLineOptions(c(0))},{label:this.t("Tasa de pobreza extrema"),data:e.map(t=>({x:t.year,y:t.extremePovertyRateNational})),...this.getDatasetLineOptions(c(1))}]}}}function l(){try{new y("C1-G3a")}catch{}}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",l):l();
